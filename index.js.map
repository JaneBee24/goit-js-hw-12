{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"49034890-15d0e202b9bb59c7b310d7a4f\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function getImagesByQuery(query, page = 1, perPage = 15) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n      page,\n      per_page: perPage,\n    },\n  });\n\n  return {\n    images: response.data.hits,\n    total: response.data.totalHits,\n  };\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\nconst loader = document.querySelector(\".loader\");\n\nlet lightbox = new SimpleLightbox(\".gallery a\", { captionsData: \"alt\", captionDelay: 250 });\n\nexport function createGallery(images) {\n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"image-info\">\n        <p><strong>Likes:</strong> ${likes}</p>\n        <p><strong>Views:</strong> ${views}</p>\n        <p><strong>Comments:</strong> ${comments}</p>\n        <p><strong>Downloads:</strong> ${downloads}</p>\n      </div>\n    </li>\n  `).join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n  loader.classList.add(\"hidden\");\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove(\"hidden\");\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add(\"hidden\");\n}\n","import { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nlet query = \"\";\nlet page = 1;\nconst perPage = 15;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", async (event) => {\n  event.preventDefault();\n  query = event.currentTarget.elements[\"query\"].value.trim();\n\n  if (!query) {\n    iziToast.warning({ title: \"Увага\", message: \"Введіть запит для пошуку!\" });\n    return;\n  }\n\n  page = 1;\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const { images, total } = await getImagesByQuery(query, page, perPage);\n    totalHits = total;\n\n    if (images.length === 0) {\n      iziToast.info({\n        title: \"Інформація\",\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n      });\n      return;\n    }\n\n    createGallery(images);\n\n    if (totalHits > page * perPage) showLoadMoreButton();\n  } catch (error) {\n    iziToast.error({ title: \"Помилка\", message: \"Не вдалося завантажити зображення.\" });\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  page++;\n  showLoader();\n\n  try {\n    const { images } = await getImagesByQuery(query, page, perPage);\n    createGallery(images);\n\n    if (page * perPage >= totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({ title: \"Інформація\", message: \"We're sorry, but you've reached the end of search results.\" });\n    }\n\n    const { height } = document.querySelector(\".gallery-item\").getBoundingClientRect();\n    window.scrollBy({ top: height * 2, behavior: \"smooth\" });\n  } catch (error) {\n    iziToast.error({ title: \"Помилка\", message: \"Не вдалося завантажити зображення.\" });\n  } finally {\n    hideLoader();\n  }\n});"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","perPage","response","axios","gallery","loadMoreBtn","loader","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","totalHits","event","iziToast","total","height"],"mappings":"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"}